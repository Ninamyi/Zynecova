<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zynecova - Noticias y más</title>
    <link rel="stylesheet" href="css/noticias.css">
    <link rel="stylesheet" href="css/asistente.css"> 
</head>
<body>
    
    <header>
        <div class="header-left">
            <img src="img/logo.png" alt="Zynecova" style="width:80px;">
            <h1>Zynecova</h1>
        </div>
        <div class="header-right">
            <a href="login.html" class="btn-login">Iniciar sesión</a>
            <button class="btn-menu" id="btnMenu">&#9776;</button>
        </div>
    </header>

    <div id="menuLateral" class="menu-lateral">
        <button id="cerrarMenu" class="cerrar-menu">&times;</button>
        <h2 class="menu-titulo">Menú</h2>
        <ul>
            <li><a href="informacion.html">Información</a></li>
            <li><a href="soporte.html">Soporte</a></li>
        </ul>
    </div>

    <main>
        <div id="listaNoticias" class="noticias-container"></div>
    </main>

    <footer>
        <p>&copy; 2025 Zynecova. Todos los derechos reservados.</p>
    </footer>

    <div class="chatbot-toggle" id="chatbot-toggle">
        <img src="https://cdn-icons-png.flaticon.com/512/4712/4712027.png" alt="Asistente" />
    </div>

    <div class="chatbot" id="chatbot">
        <div class="chatbot-header">
            Asistente Virtual
        </div>
        <div class="chatbot-body" id="chatbot-body">
            <div class="bot-message">¡Bienvenido/a! Soy tu asistente virtual.  
            </div>
        </div>
        <div class="chatbot-footer">
            <input type="text" id="user-input" placeholder="Escribe tu mensaje..." />
            <button id="send-btn">Enviar</button>
        </div>
    </div>
    <script>
        async function cargarNoticias() {
            try {
                const res = await fetch("http://localhost:3000/api/noticias");
                const noticias = await res.json();

                const listaNoticias = document.getElementById('listaNoticias');
                listaNoticias.innerHTML = "";

                noticias.forEach(n => {
                    listaNoticias.innerHTML += `
                    <article class="noticia">
                        <h2>${n.titulo}</h2>
                        ${n.imagen ? `<img src="${n.imagen}" alt="imagen noticia">` : ""}
                        <p>${n.contenido}</p>
                        <small>Publicado el: ${new Date(n.fecha).toLocaleDateString()}</small>
                    </article>
                    `;
                });
            } catch (error) {
                console.error(error);
                alert("Error al cargar las noticias");
            }
        }

        document.addEventListener("DOMContentLoaded", cargarNoticias);

        const btnMenu = document.getElementById("btnMenu");
        const menuLateral = document.getElementById("menuLateral");
        const cerrarMenu = document.getElementById("cerrarMenu");

        btnMenu.addEventListener("click", () => {
            menuLateral.style.width = "250px";
        });

        cerrarMenu.addEventListener("click", () => {
            menuLateral.style.width = "0";
        });

        document.addEventListener("click", (e) => {
            if (!menuLateral.contains(e.target) && !btnMenu.contains(e.target)) {
                menuLateral.style.width = "0";
            }
        });
    </script>
    
    <script src="js/asistente.js"></script> 
</body>
</html>